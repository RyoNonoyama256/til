### ファイルディスクリプタ
概要:
- OSによって管理されている，ファイルや標準入出力などのリソースへの参照
- プログラムとリソース（ファイル、ソケット、パイプなど）を結ぶインターフェースのようなものと理解

標準入出力のデフォルト割当て:
- 0：標準入力（stdin）
- 1：標準出力（stdout）
- 2：標準エラー出力（stderr）

システムコールを見る: 
- straceを使用してシステムコールを覗く
  - strace: デバッグやパフォーマンスチューニングに使わるLinuxのツールで、プロセスが発行するシステムコールを監視することができる
    ```
    open("/lib/x86_64-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
    read(3, "\177ELF\2\1\1\3&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;\3&#092;&#048;>&#092;&#048;\1&#092;&#048;&#092;&#048;&#092;&#048;P\t\2&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;&#092;&#048;"..., 832) = 832
    ```
  - openでファイルディスクリプタ3を指定していることがわかる．このように標準I/O以外のリソースは3から順に割り当てられる

（実験）標準エラー出力の出力先を変更する: 
- まず，標準出力をコンソールではなくtmp.txtにリダイレクトさせてみる
    ```
    > ruby -e "STDOUT.puts 'ok'; STDERR.puts 'err'" 1>tmp.txt
    > cat tmp.txt
    Output: 
            ok
    ```
    注意:
      - ファイルディスクリプタだと識別させるために'&'が必要
- 次に，標準エラー出力を標準出力のファイルディスクリプタにリダイレクトさせてみる
    ```
    > ruby -e "STDOUT.puts 'ok'; STDERR.puts 'err'" 1>tmp.txt 2>&1
    > cat tmp.txt
    Output:
            ok
            err
    ```
- ちなみにリダイレクトの順序を逆にすると，標準エラーがコンソールに出力される
    ```
    > ruby -e "STDOUT.puts 'ok'; STDERR.puts 'err'" 2>&1 1>tmp.txt
    Output: 
            err
    > cat tmp.txt
    Output:
            ok
    ```
    理由:
      - '2>&1'が実行された時にはまだ，標準出力はコンソールに向いているから

